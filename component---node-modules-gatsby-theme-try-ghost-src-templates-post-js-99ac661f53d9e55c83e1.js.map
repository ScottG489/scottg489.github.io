{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-try-ghost/src/templates/post.js"],"names":["Post","data","location","pageContext","basePath","useOptions","text","get","useLang","post","ghostPost","prevPost","prev","nextPost","next","previewPosts","allGhostPost","edges","readingTime","readingTimeHelper","replace","featImg","featureImageSharp","publicURL","feature_image","fluidFeatureImg","childImageSharp","fluid","postClass","PostClass","tags","isFeatured","isImage","primaryTagCount","toc","childHtmlRehype","tableOfContents","htmlAst","transformedHtml","html","forEach","node","collectionPath","collectionPaths","id","Fragment","type","codeinjection_styles","throttle","isPost","activeClass","render","sticky","overlay","header","title","primaryTag","primary_tag","posts","className","to","resolveUrl","slug","url","name","ref","anchorRef","custom_excerpt","authors","map","author","i","key","dateTime","published_at","published_at_pretty","fluidClass","fluidImg","srcImg","postQuery"],"mappings":"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","file":"component---node-modules-gatsby-theme-try-ghost-src-templates-post-js-99ac661f53d9e55c83e1.js","sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport { Link, graphql } from 'gatsby'\nimport { Helmet } from 'react-helmet'\n\nimport { readingTime as readingTimeHelper } from '@tryghost/helpers'\nimport { resolveUrl } from '../utils/routing'\nimport useOptions from '../utils/use-options'\nimport { useLang, get } from '../utils/use-lang'\n\nimport { Layout, HeaderPost, AuthorList, PreviewPosts, ImgSharp, RenderContent } from '../components/common'\nimport { Comments, TableOfContents, Subscribe } from '../components/common'\n\nimport { StickyNavContainer, OverlayContainer } from '../components/common/effects'\nimport { MetaData } from '../components/common/meta'\n\nimport { PostClass } from '../components/common/helpers'\n\n/**\n* Single post view (/:slug)\n*\n* This file renders a single post and loads all the content.\n*\n*/\nconst Post = ({ data, location, pageContext }) => {\n    const { basePath } = useOptions()\n    const text = get(useLang())\n    const post = data.ghostPost\n    const prevPost = data.prev\n    const nextPost = data.next\n    const previewPosts = data.allGhostPost.edges\n    const readingTime = readingTimeHelper(post).replace(`min read`,text(`MIN_READ`))\n    const featImg = post.featureImageSharp && post.featureImageSharp.publicURL || post.feature_image\n    const fluidFeatureImg = post.featureImageSharp && post.featureImageSharp.childImageSharp && post.featureImageSharp.childImageSharp.fluid\n    const postClass = PostClass({ tags: post.tags, isFeatured: featImg, isImage: featImg && true })\n    const primaryTagCount = pageContext.primaryTagCount\n\n    const toc = post.childHtmlRehype && post.childHtmlRehype.tableOfContents || []\n    const htmlAst = post.childHtmlRehype && post.childHtmlRehype.htmlAst\n    const transformedHtml = post.childHtmlRehype && post.childHtmlRehype.html\n\n    // Collection paths must be retrieved from pageContext\n    previewPosts.forEach(({ node }) => node.collectionPath = pageContext.collectionPaths[node.id])\n    if (prevPost) {\n        prevPost.collectionPath = pageContext.collectionPaths[prevPost.id]\n    }\n    if (nextPost) {\n        nextPost.collectionPath = pageContext.collectionPaths[nextPost.id]\n    }\n\n    return (\n        <React.Fragment>\n            <MetaData data={data} location={location} type=\"article\"/>\n            <Helmet>\n                <style type=\"text/css\">{`${post.codeinjection_styles}`}</style>\n            </Helmet>\n            <StickyNavContainer throttle={300} isPost={true} activeClass=\"nav-post-title-active\" render={ sticky => (\n                <OverlayContainer render={ overlay => (\n                    <Layout isPost={true} sticky={sticky} overlay={overlay}\n                        header={<HeaderPost sticky={sticky} title={post.title} overlay={overlay}/>}\n                        previewPosts={<PreviewPosts primaryTag={post.primary_tag} primaryTagCount={primaryTagCount} posts={previewPosts} prev={prevPost} next={nextPost}/>}>\n                        <div className=\"inner\">\n                            <article className={`post-full ${postClass}`}>\n                                <header className=\"post-full-header\">\n                                    { post.primary_tag &&\n                                            <section className=\"post-full-tags\">\n                                                <Link to={resolveUrl(basePath, `/`, post.primary_tag.slug, post.primary_tag.url)}>{post.primary_tag.name}</Link>\n                                            </section>\n                                    }\n\n                                    <h1 ref={sticky && sticky.anchorRef} className=\"post-full-title\">{post.title}</h1>\n\n                                    { post.custom_excerpt &&\n                                        <p className=\"post-full-custom-excerpt\">{post.custom_excerpt}</p>\n                                    }\n\n                                    <div className=\"post-full-byline\">\n                                        <section className=\"post-full-byline-content\">\n                                            <AuthorList authors={post.authors} isPost={true}/>\n\n                                            <section className=\"post-full-byline-meta\">\n                                                <h4 className=\"author-name\">\n                                                    {post.authors.map((author, i) => (\n                                                        <>\n                                                            {i > 0 ? `, ` : ``}\n                                                            <Link key={i} to={resolveUrl(basePath, `/`, author.slug, author.url)}>{author.name}</Link>\n                                                        </>\n                                                    ))}\n                                                </h4>\n                                                <div className=\"byline-meta-content\">\n                                                    <time className=\"byline-meta-date\" dateTime={post.published_at}>\n                                                        {post.published_at_pretty}&nbsp;\n                                                    </time>\n                                                    <span className=\"byline-reading-time\"><span className=\"bull\">&bull;</span> {readingTime}</span>\n                                                </div>\n                                            </section>\n                                        </section>\n                                    </div>\n                                </header>\n\n                                { featImg &&\n                                    <figure className=\"post-full-image\">\n                                        <ImgSharp fluidClass=\"kg-card kg-code-card\" fluidImg={fluidFeatureImg} srcImg={featImg} title={post.title}/>\n                                    </figure>\n                                }\n\n                                <section className=\"post-full-content\">\n                                    <TableOfContents toc={toc} url={resolveUrl(basePath, pageContext.collectionPaths[post.id], post.slug, post.url)}/>\n                                    <RenderContent htmlAst={htmlAst} html={transformedHtml || post.html} />\n                                </section>\n\n                                <Subscribe />\n\n                                <Comments id={post.id}/>\n\n                            </article>\n                        </div>\n                    </Layout>\n                )}/>\n            )}/>\n        </React.Fragment>\n    )\n}\n\nPost.propTypes = {\n    data: PropTypes.shape({\n        ghostPost: PropTypes.object.isRequired,\n        prev: PropTypes.object,\n        next: PropTypes.object,\n        allGhostPost: PropTypes.object.isRequired,\n    }).isRequired,\n    location: PropTypes.object.isRequired,\n    pageContext: PropTypes.object,\n}\n\nexport default Post\n\nexport const postQuery = graphql`\n    query($slug: String!, $prev: String!, $next: String!, $tag: String!, $limit: Int!, $skip: Int!) {\n        ghostPost: ghostPost(slug: { eq: $slug }) {\n            ...GhostPostFields\n        }\n        prev: ghostPost(slug: { eq: $prev }) {\n            ...GhostPostFieldsForIndex\n        }\n        next: ghostPost(slug: { eq: $next }) {\n            ...GhostPostFieldsForIndex\n        }\n        allGhostPost(\n            filter: {slug: { ne: $slug },tags: {elemMatch: {slug: {eq: $tag}}}},\n            limit: $limit,\n            skip: $skip,\n            sort: { fields: [featured, published_at], order: [DESC, DESC] }\n        ) {\n            edges {\n                node {\n                ...GhostPostFieldsForIndex\n                }\n            }\n        }\n    }\n`\n"],"sourceRoot":""}